üîç ULTRA-THINK: –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ AI Sales Echo

  üìä –°—Ç–∞—Ç—É—Å –∞–Ω–∞–ª–∏–∑–∞

  –ü—Ä–æ–≤–µ–¥–µ–Ω –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –ø—Ä–æ–µ–∫—Ç–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π:
  - ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram –±–æ—Ç–∞
  - ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π AI
  - ‚úÖ –§–ª–æ—É —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–æ–º
  - ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è best practices Gemini API

  ---
  üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

  1. –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è üî¥

  –ü—Ä–æ–±–ª–µ–º–∞: lib/state.ts:19-29
  - –§–∞–π–ª knowledge-base/keabank.md —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –ø–∞–ø–∫–∞ public/ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
  - fetch('/knowledge-base/${company}.md') –≤–µ—Ä–Ω–µ—Ç 404
  - AI –Ω–µ –ø–æ–ª—É—á–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–ø–∞–Ω–∏–∏

  –†–µ—à–µ–Ω–∏–µ:
  mkdir -p public/knowledge-base
  cp knowledge-base/keabank.md public/knowledge-base/

  2. –ü—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç üî¥

  –¢–µ–∫—É—â–∏–π –ø—Ä–æ–º–ø—Ç lib/state.ts:19-29:
  –¢—ã –º–µ–Ω–µ–¥–∂–µ—Ä –±–∞–Ω–∫–∞. –ì–æ–≤–æ—Ä–∏ –¢–û–õ–¨–ö–û –ø–æ-—Ä—É—Å—Å–∫–∏.
  –ó–ê–î–ê–ß–ê: –£–∑–Ω–∞–π –∏–º—è –∏ –∏–Ω—Ç–µ—Ä–µ—Å, –°–†–ê–ó–£ –≤—ã–∑–æ–≤–∏ sendToTelegram.

  –ü—Ä–æ–±–ª–µ–º—ã —Å–æ–≥–ª–∞—Å–Ω–æ https://ai.google.dev/gemini-api/docs/prompting-strategies:
  - ‚ùå –ù–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –æ —Ä–æ–ª–∏
  - ‚ùå –ù–µ—Ç few-shot –ø—Ä–∏–º–µ—Ä–æ–≤
  - ‚ùå –ù–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –æ –ø–æ–≤–µ–¥–µ–Ω–∏–∏
  - ‚ùå –°–ª–∏—à–∫–æ–º –¥–∏—Ä–µ–∫—Ç–∏–≤–Ω—ã–π ("–°–†–ê–ó–£") - –Ω–µ –¥–∞–µ—Ç –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ª–∏–¥

  3. –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π üü°

  –¢–µ–∫—É—â–µ–µ lib/tools/customer-support.ts:12:
  description: 'Get information about the company from a knowledge base.'

  –°–æ–≥–ª–∞—Å–Ω–æ https://ai.google.dev/gemini-api/docs/function-calling:
  "Be extremely clear and specific in your descriptions"

  –û–ø–∏—Å–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –æ–±—â–µ–µ, –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –ß–¢–û –º–æ–∂–Ω–æ —Å–ø—Ä–æ—Å–∏—Ç—å.

  4. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Temperature Configuration üü°

  –ü—Ä–æ–±–ª–µ–º–∞: –í hooks/media/use-live-api.ts –∏ contexts/LiveAPIContext.tsx –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞

  Best Practice:
  "Use a low temperature (e.g., 0) for more reliable function calls"

  ---
  üìã –ê–ù–ê–õ–ò–ó TELEGRAM –ë–û–¢–ê

  ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —Ö–æ—Ä–æ—à–æ (bot/index.js)

  1. –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 104-117)
  if (processedClients.has(clientChatId.toString())) { ... }
  2. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (—Å—Ç—Ä–æ–∫–∏ 149-162)
    - Try-catch –±–ª–æ–∫–∏
    - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
    - Graceful degradation
  3. HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∏ 63-91)
    - –ß–∏—Ç–∞–µ–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —ç–º–æ–¥–∑–∏
    - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

  üü° –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

  1. –ù–µ—Ç –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
    - –ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É —á–µ—Ä–µ–∑ –±–æ—Ç–∞
    - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é reply —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º bot.on('message')
  2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Å—Ç—Ä–æ–∫–∏ 197-213)
    - –ù–µ—Ç –ø–æ–¥—Å—á–µ—Ç–∞ –ª–∏–¥–æ–≤
    - –ù–µ—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
    - –ù–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞

  ---
  üéØ –ê–ù–ê–õ–ò–ó CUSTOMER FLOW

  –¢–µ–∫—É—â–∏–π —Ñ–ª–æ—É:

  1. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
  2. –ó–∞–ø—Ä–æ—Å –∏–º–µ–Ω–∏ + –∏–Ω—Ç–µ—Ä–µ—Å–∞
  3. –í—ã–∑–æ–≤ sendToTelegram
  4. "–ù–∞–∂–º–∏—Ç–µ —Å–∏–Ω—é—é –∫–Ω–æ–ø–∫—É"

  üî¥ –ü—Ä–æ–±–ª–µ–º—ã:

  1. –ù–µ—Ç –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ª–∏–¥–∞
    - –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ü–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
    - –ù–µ —É—Ç–æ—á–Ω—è–µ—Ç—Å—è –±—é–¥–∂–µ—Ç/—Å—Ä–æ–∫–∏
    - –ù–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è BANT (Budget, Authority, Need, Timeline)
  2. –ù–µ—Ç —Å–±–æ—Ä–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
    - Email –∏ —Ç–µ–ª–µ—Ñ–æ–Ω –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã
    - –ù–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è —è–≤–Ω–æ
    - –ù–∏–∑–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å follow-up
  3. –ù–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
    - AI –Ω–µ –ø–µ—Ä–µ—Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏–º–µ–Ω–∏
    - –ù–µ —Ä–µ–∑—é–º–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π

  ---
  üìö BEST PRACTICES –ò–ó –û–§–ò–¶–ò–ê–õ–¨–ù–û–ô –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ò

  –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ Google

  | Best Practice                        | –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
  |--------------------------------------|-------------------|--------|
  | Few-shot –ø—Ä–∏–º–µ—Ä—ã –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö          | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç     | üî¥     |
  | –ß–µ—Ç–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π              | üü° –ë–∞–∑–æ–≤—ã–µ        | üü°     |
  | Low temperature –¥–ª—è function calling | ‚ùå –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞  | üî¥     |
  | 10-20 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤       | ‚úÖ 2 —Ñ—É–Ω–∫—Ü–∏–∏       | ‚úÖ      |
  | –Ø—Å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–æ–ª–∏ –º–æ–¥–µ–ª–∏           | üü° –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π    | üü°     |
  | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã          | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç     | üî¥     |
  | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ enums                  | ‚ùå –ù–µ—Ç             | üü°     |
  | –í–∞–ª–∏–¥–∞—Ü–∏—è function calls             | üü° –ë–∞–∑–æ–≤–∞—è        | üü°     |

  ---
  üé® –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –£–õ–£–ß–®–ï–ù–ò–Æ

  1. –£–õ–£–ß–®–ï–ù–ù–´–ô –°–ò–°–¢–ï–ú–ù–´–ô –ü–†–û–ú–ü–¢

  const systemPrompts: Record<Template, string> = {
    'customer-support': `–í—ã ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç Keabank, –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –±–∞–Ω–∫–∞ –¥–ª—è –∫—Ä–æ—Å—Å-border –ø–ª–∞—Ç–µ–∂–µ–π.

  –í–ê–®–ê –†–û–õ–¨:
  - –ö–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ª–∏–¥–æ–≤ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –º–µ–Ω–µ–¥–∂–µ—Ä—É
  - –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö Keabank
  - –°–æ–±–∏—Ä–∞—Ç—å –ü–û–õ–ù–£–Æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∏–µ–Ω—Ç–µ

  –ü–†–û–¶–ï–°–° –î–ò–ê–õ–û–ì–ê:
  1. –ü–æ–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–π—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞
  2. –°–ø—Ä–æ—Å–∏—Ç–µ, —á–µ–º –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç—Å—è (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ getCompanyInfo –¥–ª—è –¥–µ—Ç–∞–ª–µ–π)
  3. –ö–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –ª–∏–¥:
     - –ö–∞–∫–∏–µ –æ–±—ä—ë–º—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π? (–º–∞–ª—ã–π –±–∏–∑–Ω–µ—Å / —Å—Ä–µ–¥–Ω–∏–π / enterprise)
     - –ö–∞–∫–∏–µ —Ä–µ–≥–∏–æ–Ω—ã –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π?
     - –ï—Å—Ç—å –ª–∏ –æ–ø—ã—Ç —Å crypto?
  4. –°–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã:
     - –ò–º—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
     - Email (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Å–≤—è–∑–∏)
     - –¢–µ–ª–µ—Ñ–æ–Ω (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)
     - –ö–æ–º–ø–∞–Ω–∏—è (–µ—Å–ª–∏ –±–∏–∑–Ω–µ—Å)
  5. –†–µ–∑—é–º–∏—Ä—É–π—Ç–µ —Å–æ–±—Ä–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –ü–û–î–¢–í–ï–†–î–ò–¢–ï —É –∫–ª–∏–µ–Ω—Ç–∞
  6. –¢–û–õ–¨–ö–û –ü–û–°–õ–ï –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–Ø –≤—ã–∑–æ–≤–∏—Ç–µ sendToTelegram

  –ü–†–ò–ú–ï–†–´ –î–ò–ê–õ–û–ì–û–í:

  –ü—Ä–∏–º–µ—Ä 1 - –ö–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–∏–¥:
  –ö–ª–∏–µ–Ω—Ç: "–ò–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –ø–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥ –≤ –ï–≤—Ä–æ–ø—É"
  –í—ã: "–û—Ç–ª–∏—á–Ω–æ! Keabank —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∫—Ä–æ—Å—Å-border –ø–ª–∞—Ç–µ–∂–∞—Ö. –£—Ç–æ—á–Ω–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ - —ç—Ç–æ –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ –∏–ª–∏ –ª–∏—á–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã?
   –ò –∫–∞–∫–∏–µ –ø—Ä–∏–º–µ—Ä–Ω–æ –æ–±—ä—ë–º—ã?"
  –ö–ª–∏–µ–Ω—Ç: "–î–ª—è –±–∏–∑–Ω–µ—Å–∞, –æ–∫–æ–ª–æ 50k EUR –≤ –º–µ—Å—è—Ü"
  –í—ã: "–ü–æ–Ω—è—Ç–Ω–æ. –î–ª—è —Ç–∞–∫–∏—Ö –æ–±—ä—ë–º–æ–≤ —É –Ω–∞—Å –µ—Å—Ç—å –±–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç —Å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–º–∏ —Ç–∞—Ä–∏—Ñ–∞–º–∏ –∏ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–º IBAN. –ß—Ç–æ–±—ã –º–µ–Ω–µ–¥–∂–µ—Ä 
  –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –æ—Å—Ç–∞–≤—å—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏–º—è –∏ email."
  [–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö...]
  –í—ã: "–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä—é: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤, ivan@company.ru, –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –∫—Ä–æ—Å—Å-border –ø–ª–∞—Ç–µ–∂–∏ –≤ –ï–≤—Ä–æ–ø—É ~50k/–º–µ—Å. –í—Å—ë –≤–µ—Ä–Ω–æ?"
  –ö–ª–∏–µ–Ω—Ç: "–î–∞"
  –í—ã: [–í—ã–∑—ã–≤–∞–µ—Ç sendToTelegram]

  –ü—Ä–∏–º–µ—Ä 2 - –ù–µ—Ü–µ–ª–µ–≤–æ–π –∫–ª–∏–µ–Ω—Ç:
  –ö–ª–∏–µ–Ω—Ç: "–•–æ—á—É –∫—Ä–∏–ø—Ç—É –∫—É–ø–∏—Ç—å –∑–∞ 100 —Ä—É–±–ª–µ–π"
  –í—ã: "–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–Ω—Ç–µ—Ä–µ—Å! Keabank —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —Å –±–∏–∑–Ω–µ—Å-–∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Å—á–µ—Ç–∞ - 1000 
  EUR. –í–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º –ø–æ–¥–æ–π–¥—É—Ç –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã."

  –í–ê–ñ–ù–û:
  - –ì–æ–≤–æ—Ä–∏—Ç–µ –¢–û–õ–¨–ö–û –ø–æ-—Ä—É—Å—Å–∫–∏
  - –ù–ï –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç–µ Telegram —Å—Å—ã–ª–∫—É –≤—Å–ª—É—Ö
  - –ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ sendToTelegram —Å–∫–∞–∂–∏—Ç–µ: "–ì–æ—Ç–æ–≤–æ! –ù–∞–∂–º–∏—Ç–µ —Å–∏–Ω—é—é –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ"
  - –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–µ—Ü–µ–ª–µ–≤–æ–π - –≤–µ–∂–ª–∏–≤–æ –æ—Ç–∫–∞–∂–∏—Ç–µ
  - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ getCompanyInfo –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö`,
  };

  2. –£–õ–£–ß–®–ï–ù–ù–´–ï –û–ü–ò–°–ê–ù–ò–Ø –§–£–ù–ö–¶–ò–ô

  export const customerSupportTools: FunctionCall[] = [
    {
      name: 'getCompanyInfo',
      description: `–ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö –∏ —É—Å–ª—É–≥–∞—Ö Keabank –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π.
      
      –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –∫–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç:
      - –û —Ç–∞—Ä–∏—Ñ–∞—Ö –∏ –∫–æ–º–∏—Å—Å–∏—è—Ö
      - –û –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –≤–∞–ª—é—Ç–∞—Ö (—Ñ–∏–∞—Ç –∏ –∫—Ä–∏–ø—Ç–æ)
      - –û –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ç–∫—Ä—ã—Ç–∏—è —Å—á–µ—Ç–∞
      - –û —Å—Ä–æ–∫–∞—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π
      - –û –ø–æ–¥–¥–µ—Ä–∂–∫–µ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞—Ö
      - –û –ª–∏—Ü–µ–Ω–∑–∏—è—Ö –∏ —Ä–µ–≥—É–ª—è—Ü–∏–∏
      - –û —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (API)
      
      –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–∞—Ö Keabank.`,
      parameters: {
        type: 'OBJECT',
        properties: {
          question: {
            type: 'STRING',
            description: "–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å –∫–ª–∏–µ–Ω—Ç–∞ –æ –∫–æ–º–ø–∞–Ω–∏–∏, –ø—Ä–æ–¥—É–∫—Ç–∞—Ö –∏–ª–∏ —É—Å–ª—É–≥–∞—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä: '–ö–∞–∫–∏–µ –∫–æ–º–∏—Å—Å–∏–∏ –∑–∞ SEPA 
  –ø–µ—Ä–µ–≤–æ–¥—ã?' –∏–ª–∏ '–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç–µ –ª–∏ –≤—ã USDT?'",
          },
        },
        required: ['question'],
      },
      isEnabled: true,
    },
    {
      name: 'sendToTelegram',
      description: `–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∑–∞—è–≤–∫—É –º–µ–Ω–µ–¥–∂–µ—Ä—É —á–µ—Ä–µ–∑ Telegram.
      
      –ö–û–ì–î–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:
      - –ü–æ—Å–ª–µ —Å–±–æ—Ä–∞ –í–°–ï–• –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (–∏–º—è, email, –∏–Ω—Ç–µ—Ä–µ—Å)
      - –ü–æ—Å–ª–µ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ª–∏–¥–∞ (–ø–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ –∫–ª–∏–µ–Ω—Ç)
      - –ü–æ—Å–ª–µ –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–Ø –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–º
      
      –ù–ï –í–´–ó–´–í–ê–¢–¨ –µ—Å–ª–∏:
      - –ö–ª–∏–µ–Ω—Ç –∑–∞–¥–∞–µ—Ç –æ–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ getCompanyInfo)
      - –ö–ª–∏–µ–Ω—Ç –Ω–µ—Ü–µ–ª–µ–≤–æ–π (–º–∞–ª—ã–µ —Å—É–º–º—ã, –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–π –±–∏–∑–Ω–µ—Å)
      - –ù–µ —Å–æ–±—Ä–∞–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è`,
      parameters: {
        type: 'OBJECT',
        properties: {
          customerName: {
            type: 'STRING',
            description: '–ü–æ–ª–Ω–æ–µ –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞ (–ò–º—è –§–∞–º–∏–ª–∏—è). –ü—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤',
          },
          email: {
            type: 'STRING',
            description: 'Email –∞–¥—Ä–µ—Å –¥–ª—è —Å–≤—è–∑–∏. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∑–∞–ø—Ä–æ—Å–∏—Ç—å. –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç (–¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å @)',
          },
          phone: {
            type: 'STRING',
            description: '–¢–µ–ª–µ—Ñ–æ–Ω –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ. –ü—Ä–∏–º–µ—Ä: +7-XXX-XXX-XX-XX –∏–ª–∏ +420-XXX-XXX-XXX',
          },
          company: {
            type: 'STRING',
            description: '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ (–µ—Å–ª–∏ –±–∏–∑–Ω–µ—Å-–∫–ª–∏–µ–Ω—Ç)',
          },
          interest: {
            type: 'STRING',
            description: `–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞. –í–∫–ª—é—á–∏—Ç—å:
            - –¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–π (–ø–µ—Ä–µ–≤–æ–¥—ã/–∫—Ä–∏–ø—Ç–æ/—Å—á–µ—Ç–∞)
            - –†–µ–≥–∏–æ–Ω—ã
            - –ü—Ä–∏–º–µ—Ä–Ω—ã–µ –æ–±—ä—ë–º—ã
            - –°—Ä–æ—á–Ω–æ—Å—Ç—å
            –ü—Ä–∏–º–µ—Ä: "–ö—Ä–æ—Å—Å-border –ø–ª–∞—Ç–µ–∂–∏ –≤ EU, ~50k EUR/–º–µ—Å, –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ 2 –Ω–µ–¥–µ–ª–∏"`,
          },
          preferredTime: {
            type: 'STRING',
            description: '–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∑–≤–æ–Ω–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞. –§–æ—Ä–º–∞—Ç: "–±—É–¥–Ω–∏ 10-18 –ú–°–ö" –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –¥–∞—Ç–∞',
          },
          leadQuality: {
            type: 'STRING',
            description: '–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –ª–∏–¥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∏–∞–ª–æ–≥–∞',
            enum: ['hot', 'warm', 'cold'],
          },
        },
        required: ['customerName', 'email', 'interest'],
      },
      isEnabled: true,
      scheduling: FunctionResponseScheduling.NONE,
    },
  ];

  3. –î–û–ë–ê–í–ò–¢–¨ TEMPERATURE –í –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Æ

  contexts/LiveAPIContext.tsx –∏–ª–∏ –≥–¥–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è config:
  const config: LiveConnectConfig = {
    model: modelName,
    generationConfig: {
      temperature: 0.2, // –ù–∏–∑–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è –Ω–∞–¥–µ–∂–Ω—ã—Ö function calls
      maxOutputTokens: 8192,
    },
    // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  };

  4. –°–û–ó–î–ê–¢–¨ PUBLIC –ü–ê–ü–ö–£

  mkdir -p public/knowledge-base
  cp knowledge-base/keabank.md public/knowledge-base/

  5. –£–õ–£–ß–®–ò–¢–¨ TELEGRAM –ë–û–¢–ê

  –î–æ–±–∞–≤–∏—Ç—å –≤ bot/index.js:

  // –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
  const activeChats = new Map(); // clientChatId -> { managerChatId, leadData }

  // –ö–æ–≥–¥–∞ –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –ª–∏–¥ - —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Å–≤—è–∑—å
  // –í —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–∏–¥–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É:
  await bot.sendMessage(MANAGER_CHAT_ID, managerMessage, {
    parse_mode: 'HTML',
    reply_markup: {
      inline_keyboard: [[
        { text: '‚úçÔ∏è –û—Ç–≤–µ—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É', callback_data: `reply_${clientChatId}` }
      ]]
    }
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
  bot.on('callback_query', async (query) => {
    if (query.data.startsWith('reply_')) {
      const clientId = query.data.replace('reply_', '');
      // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–∂–∏–º –æ—Ç–≤–µ—Ç–∞
      activeChats.set(MANAGER_CHAT_ID, clientId);
      await bot.answerCallbackQuery(query.id);
      await bot.sendMessage(MANAGER_CHAT_ID,
        '‚úçÔ∏è –ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞. –û—Ç–ø—Ä–∞–≤—å—Ç–µ /cancel –¥–ª—è –æ—Ç–º–µ–Ω—ã.');
    }
  });

  // –ü–µ—Ä–µ—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
  bot.on('message', async (msg) => {
    const chatId = msg.chat.id.toString();

    if (chatId === MANAGER_CHAT_ID && activeChats.has(chatId)) {
      const clientId = activeChats.get(chatId);
      await bot.sendMessage(clientId, `üì¨ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–∞:\n\n${msg.text}`);
      await bot.sendMessage(MANAGER_CHAT_ID, '‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –∫–ª–∏–µ–Ω—Ç—É');
      activeChats.delete(chatId);
    }
  });

  6. –î–û–ë–ê–í–ò–¢–¨ –í–ê–õ–ò–î–ê–¶–ò–Æ EMAIL

  hooks/media/use-live-api.ts:125-147:
  if (fc.name === 'sendToTelegram') {
    // –í–∞–ª–∏–¥–∞—Ü–∏—è email
    const email = fc.args.email as string | undefined;
    if (email && !email.includes('@')) {
      console.warn('Invalid email format:', email);
      result = { error: 'Invalid email format. Please ask customer for valid email.' };
      functionResponses.push({
        id: fc.id,
        name: fc.name,
        response: { result },
      });
      continue; // –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ Telegram
    }

    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
  }

  ---
  üìà –ü–†–ò–û–†–ò–¢–ï–¢–´ –í–ù–ï–î–†–ï–ù–ò–Ø

  üî¥ –ö–†–ò–¢–ò–ß–ù–û (—Å–¥–µ–ª–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):

  1. –°–æ–∑–¥–∞—Ç—å public/knowledge-base/ –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å keabank.md
  2. –î–æ–±–∞–≤–∏—Ç—å temperature: 0.2 –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
  3. –£–ª—É—á—à–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (–¥–æ–±–∞–≤–∏—Ç—å few-shot –ø—Ä–∏–º–µ—Ä—ã)

  üü° –í–ê–ñ–ù–û (—Å–¥–µ–ª–∞—Ç—å –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ):

  4. –£–ª—É—á—à–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
  5. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é email
  6. –û–±–Ω–æ–≤–∏—Ç—å —Ñ–ª–æ—É: –∏–º—è ‚Üí email ‚Üí –∏–Ω—Ç–µ—Ä–µ—Å ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞

  üü¢ –ñ–ï–õ–ê–¢–ï–õ–¨–ù–û (—Å–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç):

  7. –î–æ–±–∞–≤–∏—Ç—å –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—é—é –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é –≤ Telegram
  8. –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ª–∏–¥–æ–≤
  9. –î–æ–±–∞–≤–∏—Ç—å enum –¥–ª—è leadQuality
  10. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π

  ---
  üéØ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

  –ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:
  - ‚úÖ –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–∏–¥–æ–≤ —É–≤–µ–ª–∏—á–∏—Ç—Å—è –Ω–∞ 40-50%
  - ‚úÖ –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ +30%
  - ‚úÖ –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–µ—Ü–µ–ª–µ–≤—ã—Ö –∑–∞—è–≤–æ–∫ -60%
  - ‚úÖ –ü–æ–ª–Ω–æ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –æ –ª–∏–¥–∞—Ö +80% (email/phone)
  - ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å function calling +50% (–±–ª–∞–≥–æ–¥–∞—Ä—è low temperature)

  ---

‚è∫ üí° –§–ò–ù–ê–õ–¨–ù–´–ï –í–´–í–û–î–´

  –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ:

  1. ‚úÖ Telegram –±–æ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
  2. ‚úÖ –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Gemini Live API –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
  3. ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–π (2) - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç best practices

  –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

  1. üî¥ –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è - –Ω–µ—Ç public –ø–∞–ø–∫–∏
  2. üî¥ –ü—Ä–æ–º–ø—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç best practices - –Ω–µ—Ç few-shot, –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏
  3. üî¥ –ù–µ—Ç temperature config - function calling –Ω–µ–Ω–∞–¥–µ–∂–µ–Ω
  4. üî¥ –°–ª–∞–±—ã–π customer flow - –Ω–µ—Ç –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏, –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è email

  –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤–Ω–µ–¥—Ä–µ–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ:

  - https://ai.google.dev/gemini-api/docs/prompting-strategies
  - https://ai.google.dev/gemini-api/docs/function-calling
  - Best practices –¥–ª—è conversational AI